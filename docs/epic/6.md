# Header 组件

## 遇到对问题
项目完成后，发现只要是点击刷新，都会退出登陆状态，仔细查看后，发现`store.UserStore.currentUser` 刷新后不存在，但是在models里直接获取currentUser 就存在。
所以在登陆这有问题，原来是头部组件里没有获取 `currentUser`
```js
  useEffect(()=>{
    UserStore.pullUser();
  }, [])  //获取 currentUser
```

::: details 代码
```js
import React,{ useEffect } from "react"
import {NavLink,useHistory} from "react-router-dom"
import styled from  'styled-components'
import {Button} from "antd"
import {useStores} from "../stores"
import {observer} from "mobx-react"


const Component = observer(()=> {

  const history = useHistory()
  const { UserStore, AuthStore} =  useStores()

  const handleLogout =()=>{
    AuthStore.logout()
  }

  const handleLogin =()=>{
    console.log('跳转到登陆页面')
    history.push('/login')
  }

  const handleRegister =()=>{
    console.log('跳转到注册页面')
    history.push('/register')
  }

  useEffect(()=>{
    UserStore.pullUser();
  }, [])  //获取 currentUser
  
  return(
    <StyleHeader>
      <nav>
        <StyleLink to="/" activeClassName="active" exact>首页</StyleLink>
        <StyleLink to="/history" activeClassName="active">上传历史</StyleLink>
        <StyleLink to="/about" activeClassName="active">关于我</StyleLink>
      </nav>

      <Login>
        {
          UserStore.currentUser ? <>
            {UserStore.currentUser.attributes.username} <StyleButton type="primary" onClick={handleLogout}>注销</StyleButton>
          </>: <>
            <StyleButton type="primary" onClick={handleLogin}>登陆</StyleButton>
            <StyleButton type="primary" onClick={handleRegister}>注册</StyleButton>
          </>
        }
      </Login>
    </StyleHeader>
  );
})
export default Component;
```
:::