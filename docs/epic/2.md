# mobx 实现全局状态管理
第一步：设置store
```js
//管理登陆和注册
import {observable,action} from "mobx"
class AuthStore {
  @observable isLogin = false
  @observable isLoading = false
  @observable values = {
    username:'jirengu',
    password:'',
  }

  //行为
  @action setIsLogin (isLogin){
    this.isLogin = isLogin
  }
  @action setUsername(username){
    this.values.username= username
  }
  @action setPassword(password){
    this.values.password= password
  }
  @action login(){
    console.log('登陆中。。。')
    this.isLoading=true
    setTimeout(()=>{
      console.log('登陆成功')
      this.isLogin = true
      this.isLoading = false
    },1000)
  }
  @action register(){
    console.log('注册。。。')
    this.isLoading=true
    setTimeout(()=>{
      console.log('注册成功')
      this.isLogin = true
      this.isLoading = false
    },1000)
  }

  @action logout(){
    console.log('已注销')
  }

}
export {AuthStore};
```
第二步：创建Context对象
第三步:设置 `useStores`函数，用于函数组件里获取`context`对象

```js
//总入口
import {createContext,useContext} from "react"
import {AuthStore} from "./auth"

const context = createContext({
  AuthStore: new AuthStore()
})

export const useStores = ()=>useContext(context)
```

第四步：使用context，例如在登陆组件里，通过`useStores`获取context对象
```js
import React from "react"
import {observer} from 'mobx-react'
import {useStores} from '../stores/index'

const Component = observer (() =>{ //监控状态的变化

  const {AuthStore} = useStores()
  
  return(
    <>
     <h1>login:</h1>
    </>
  )
})
export default Component;
```
最后还需要配置
1. `yarn add @babel/plugin-proposal-decorators`
2. 提交代码，确保仓库干净
3. yarn run eject
4.  修改`package.json`,找到 `babel`字段，添加

```json
 "babel": {
    "presets": [
      "react-app"
    ],
    "plugins": [
      [
        "@babel/plugin-proposal-decorators",
        {
          "legacy": true
        }
      ]
    ]
  }
```