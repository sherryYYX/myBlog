# 浅拷贝和深拷贝

### 浅拷贝
```js
let obj={
  name:'小王子',
  age:22,
  haveDog:{
    DogName:'欢欢',
  }
}

function qianClone(obj){
  let newObj = {}
  for(let i in obj){
  newObj[i] = obj[i]
  }
  return newObj
}

let obj2 = qianClone(obj)//拷贝给obj2
console.log(obj2)

```
最后obj2的结果
```js
{name: "小王子", age: 22, haveDog: {…}}
age: 22
haveDog: {DogName: "欢欢"}
name: "小王子"
__proto__: Object
```
对新的拷贝对象`obj2`进行修改
```js
obj2.age = 33
obj2.haveDog.DogName='奶猫'

console.log( obj)
```
修改后的obj2数据正常改变，但是原来的`obj`里的基本数据没有被改变，复杂类型被改了
```js
[object Object] {
  age: 22,//没变
  haveDog: [object Object] {
    DogName: "奶猫" //被修改
  },
  name: "小王子"
}
```
## 深拷贝
```js
function deepClone(obj) {
        //1.如果不是复杂数据类型,就直接返回一个一样的对象
        if(typeof obj !="object"){
            return obj
        }
        //2.如果是,就递归调用
        var newObj = {};
        for (let i in obj) {
          newObj[i] = deepClone(obj[i])
        }
        return newObj;
      }

```
这样在运行打印上面的`obj`就是最原始的数据

### 但是这种方式需求实现了，但是不完善，如果要拷贝的对象类型是null、日期对象、数组对象等特殊类型，这样结果是错的。
解决方式：
```js
 function deepClone(obj) {
      if (obj === null) return null; //null 的情况
      if (obj instanceof RegExp) return new RegExp(obj); //正则表达式的情况
      if (obj instanceof Date) return new Date(obj); //日期对象的情况
      if (typeof obj == 'Function') return new function(obj){}; //函数的情况
      if (typeof obj != "object") {
        //非复杂类型,直接返回 也是结束递归的条件
        return obj
      }
      //[].__proto__.constructor=Array()
      //{}.__proto__.constructor=Object()
      //因此处理数组的情况时,可以取巧用这个办法来new新对象
      let newObj = new obj.__proto__.constructor;
      for (let i in obj) {
        newObj[i] = deepClone(obj[i])
      }
      return newObj;
    }
```
## 数组去重
```js
let arr = [1, 1, 2, 2, 3, 3, 4, 5];
let unique = [...new Set(arr)];
console.log(unique);


// [1, 2, 3, 4, 5]
```

## popover 实现原理
组件里有两部分，一个是弹出内容，一个是点击按钮。功能是点击按钮，弹出提示，再点击关闭。
1. 再组件的最外层添加点击事件，控制显示和隐藏
2. 用 `v-show` 控制内容的显示隐藏，默认不显示
3. 用 `ref`获取内容，然后把它插入 `body`, 很重要的一步，不然如果用户写了 `overflow: hidden` 内容显示残缺

获取内容的元素的位置 `getBoundingClientRect()`

## vuepress 部署
```javascript
`git push`
`./deploy.sh`
`git open`
```
