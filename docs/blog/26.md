# React 函数组件
```js
//第一种
const Hello = (props) => {
  return <div>{props.message}</div>
}
//第二种
const Hello = props => <div>{props.message}</div>
//第三种
function Hello(props){
  return <div>{props.message}</div>
}
```
## 函数组件替代class组件
有两个问题
1. 没有state
2. 没有生命周期
解决：
1. 用Hooks API，其中有个API 叫`useState`
2. 用Hooks API，`useEffect`
   
## useEffect
可以模拟 `componentDidMount`
```js
useEffect(()=>{
    console.log('第一次渲染')
},[])
```

可以模拟 `componentDidUpdate`
```js
useEffect(()=>{
    console.log('任意属性变更')
})
```
```js
useEffect(()=>{
    console.log('n变了')
},[n])
```
可以模拟 `componentWillUnmount`
```js
useEffect(()=>{
    console.log('第一次渲染')
    return ()=>{
        console.log('组件要死了')
    }
})
```
## 其他生命周期怎么模拟
### constructor
函数组件执行的时候，相当于constructor 初始化
### shouldComponentUpdate
React.memo 和 useMemo 可以解决
### render
函数组件返回值就是render的返回值

## 自定义 Hook => useUpdate
```js
const useUpdate=(fn,dep)=>{
    const [count, setCount] = useState(0)
    useEffect(()=>{
        setCount(x => x+1)
    },[dep])

    useEffect(()=>{
       if(count >1 ){
           fn()
       }
    },[count,fn])
}

export default useUpdate
```
功能
1. 第一次由 undefined 变成 0 时不执行函数
2. 第二次变化时执行函数
3. ...

## react 函数组件渲染流程图
![img](./26-1.png)