# 引入 svg 
## svg loader 配置
第一步：因为使用`typeScript`,所以要在`shims-vue.d.ts` 里声明
```ts
declare module "*.svg" {
  const content: string;
  export default content;
}
```
第二步：引入`svg`要的 loader，在命令行输入 `yarn add svg-sprite-loader svgo-loader`。


第三步：在`vue.config.js` 里配置
```js
const path = require("path");

module.exports = {
  chainWebpack: config => {
    const dir = path.resolve(__dirname, "src/assets/icons"); // 存放icons的目录

    config.module
      .rule("svg-sprite")
      .test(/\.svg$/)
      .include.add(dir)
      .end() // 包含 icons 目录
      .use("svg-sprite-loader") //使用此loader
      .loader("svg-sprite-loader")
      .options({ extract: false })
      .end()
      .use("svgo-loader")
      .loader("svgo-loader")
      .tap(options => ({
        ...options,
        plugins: [{ removeAttrs: { attrs: "fill" } }] // 删除svg的fill属性
      }))
      .end();
    config
      .plugin("svg-sprite")
      .use(require("svg-sprite-loader/plugin"), [{ plainSprite: true }]);
    config.module.rule("svg").exclude.add(dir); // 其他 svg loader 不会解析 icons 目录
  }
};

```
::: tip 提醒
如果有`ESLint: Require statement not part of import statement.(@typescript-eslint/no-var-requires)`报错，请在`eslintrc.js`里配置
```js
module.exports = {
  ...
  rules: {
    ...
    '@typescript-eslint/no-var-requires': 0,
  }
}
```
:::

第四步：引入所有`svg`
```ts
//引入所有svg
  const importAll = (requireContext: __WebpackModuleApi.RequireContext) =>
    requireContext.keys().forEach(requireContext);
  try {
    importAll(require.context("../assets/icons", true, /\.svg$/));
  } catch (e) {
    console.log(e);
  }
```
## Icon 组件
为了减少代码的重复进行优化，抽离组件 `Icon`

::: details Icon 组件
```vue
<template>
  <svg class="icon">
    <use :xlink:href="'#'+svgName"></use>
  </svg>
</template>

<script lang="ts">

  //引入所有svg
  const importAll = (requireContext: __WebpackModuleApi.RequireContext) =>
    requireContext.keys().forEach(requireContext);
  try {
    importAll(require.context("../assets/icons", true, /\.svg$/));
  } catch (e) {
    console.log(e);
  }

  export default  {
    name:'Icons',
    props:["svgName"]
  }
</script>

<style lang="scss" scoped>
.icon{
  width: 1em; height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}
</style>
```
:::

在`Nav`里应用
```html
<Icon svg-name="money"></Icon>
```


